(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{149:function(t,e,n){"use strict";n(45),n(47),n(67);var r=n(669),a=n.n(r),s=(n(286),n(664),n(155),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=n(364)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(t){t.renderer.rules.mention=function(t,e){return'<span class="prosemirror-mention-node">'.concat(t[e].content,"</span>")},t.inline.ruler.before("link","mention",(function(t,e){var n,r,a,i,o,u,c="",l=t.posMax;return 91===t.src.charCodeAt(t.pos)&&(a=t.pos+1,!((r=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)&&(n=t.src.slice(a,r),(i=r+1)<l&&40===t.src.charCodeAt(i)&&(i+=1,(o=t.md.helpers.parseLinkDestination(t.src,i,t.posMax)).ok&&(c=t.md.normalizeLink(o.str),t.md.validateLink(c)?i=o.pos:c=""),i+=1),!!c.match(new RegExp(s))&&(e||(t.pos=a,t.posMax=r,(u=t.push("mention","")).href=c,u.content=n),t.pos=i,t.posMax=l,!0)))}))})).use(a.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),c=/(^|[^@\w])@(\w{1,15})\b/g,l=/(^|\s)#(\w+)/g,d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.message=e||"",this.isAPrivateNote=r,this.isATweet=n}var e,n,r;return e=t,(n=[{key:"formatMessage",value:function(){var t=this.message;return this.isATweet&&!this.isAPrivateNote&&(t=(t=t.replace(c,"$1[@$2](http://twitter.com/$2)")).replace(l,"$1[#$2](https://twitter.com/hashtag/$2)")),u.render(t)}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&o(e.prototype,n),r&&o(e,r),t}(),m=d;e.a={methods:{formatMessage:function(t,e,n){return new m(t,e,n).formattedMessage},getPlainText:function(t,e){return new m(t,e).plainText},truncateMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.length<100?t:"".concat(t.slice(0,97),"...")}}}},2001:function(t,e,n){var r=n(34),a=n(265);t.exports=function(t){return r((function(){return!!a[t]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[t]()||a[t].name!==t}))}},2002:function(t,e,n){"use strict";n(661)},2003:function(t,e,n){"use strict";n(662)},2791:function(t,e,n){t.exports=n.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},2843:function(t,e,n){},2844:function(t,e,n){},2866:function(t,e,n){"use strict";n(7),n(3),n(5),n(9),n(8),n(10),n(27),n(6),n(29),n(21),n(26),n(23),n(45),n(22),n(49);var r=n(86),a=n(4),s=n(336),i=n(350),o=n(285),u=(n(30),n(31),n(149)),c=n(61),l=n(263),d={name:"UnreadMessage",components:{Thumbnail:c.a},mixins:[u.a,s.a,l.a],props:{message:{type:String,default:""},showSender:{type:Boolean,default:!1},sender:{type:Object,default:function(){}},campaignId:{type:Number,default:null}},computed:{companyName:function(){return"".concat(this.$t("UNREAD_VIEW.COMPANY_FROM")," ").concat(this.channelConfig.websiteName)},avatarUrl:function(){var t=n(2791),e=this.useInboxAvatarForBot?this.inboxAvatarUrl:t;if(this.isSenderExist(this.sender)){var r=this.sender.avatar_url;return r}return e},agentName:function(){if(this.isSenderExist(this.sender)){var t=this.sender,e=t.available_name,n=t.name;return e||n}return this.$t("UNREAD_VIEW.BOT")},availabilityStatus:function(){if(this.isSenderExist(this.sender)){var t=this.sender.availability_status;return t}return null}},methods:{isSenderExist:function(t){return t&&!Object(r.d)(t)},onClickMessage:function(){this.campaignId?bus.$emit(i.b,this.campaignId):bus.$emit(i.c)}}},m=(n(2994),n(1)),f=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-bubble-wrap"},[n("button",{staticClass:"chat-bubble agent",class:t.$dm("bg-white","dark:bg-slate-50"),on:{click:t.onClickMessage}},[t.showSender?n("div",{staticClass:"row--agent-block"},[n("thumbnail",{attrs:{src:t.avatarUrl,size:"20px",username:t.agentName,status:t.availabilityStatus}}),t._v(" "),n("span",{staticClass:"agent--name"},[t._v(t._s(t.agentName))]),t._v(" "),n("span",{staticClass:"company--name"},[t._v(" "+t._s(t.companyName))])],1):t._e(),t._v(" "),n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.message,!1),expression:"formatMessage(message, false)"}],staticClass:"message-content"})])])}),[],!1,null,"7466f37b",null).exports,g=n(680);function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,a,s=[],i=!0,o=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(s.push(r.value),!e||s.length!==e);i=!0);}catch(u){o=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={name:"Unread",components:{FluentIcon:o.a,UnreadMessage:f},mixins:[s.a],props:{messages:{type:Array,required:!0}},computed:v(v({},Object(a.mapGetters)({unreadMessageCount:"conversation/getUnreadMessageCount",widgetColor:"appConfig/getWidgetColor"})),{},{sender:function(){return h(this.messages,1)[0].sender||{}},isBackgroundLighter:function(){return Object(g.a)(this.widgetColor)}}),methods:{openConversationView:function(){bus.$emit(i.c)},closeFullView:function(){r.a.isIFrame()&&r.a.sendMessage({event:"toggleBubble"})},getMessageContent:function(t){var e=t.attachments,n=t.content,r=e&&e.length;return n||(r?"\ud83d\udcd1":"")}}},S=(n(2995),Object(m.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unread-wrap"},[n("div",{staticClass:"close-unread-wrap"},[n("button",{staticClass:"button small close-unread-button",on:{click:t.closeFullView}},[n("span",{staticClass:"flex items-center"},[n("fluent-icon",{staticClass:"mr-1",attrs:{icon:"dismiss",size:"12"}}),t._v("\n        "+t._s(t.$t("UNREAD_VIEW.CLOSE_MESSAGES_BUTTON"))+"\n      ")],1)])]),t._v(" "),n("div",{staticClass:"unread-messages"},t._l(t.messages,(function(e,r){return n("unread-message",{key:e.id,attrs:{"message-type":e.messageType,"message-id":e.id,"show-sender":!r,sender:e.sender,message:t.getMessageContent(e),"campaign-id":e.campaignId}})})),1),t._v(" "),n("div",{staticClass:"open-read-view-wrap"},[t.unreadMessageCount?n("button",{staticClass:"button clear-button",on:{click:t.openConversationView}},[n("span",{staticClass:"flex items-center",class:{"is-background-light":t.isBackgroundLighter},style:{color:t.widgetColor}},[n("fluent-icon",{staticClass:"mr-2",attrs:{size:"16",icon:"arrow-right"}}),t._v("\n        "+t._s(t.$t("UNREAD_VIEW.VIEW_MESSAGES_BUTTON"))+"\n      ")],1)]):t._e()])])}),[],!1,null,"4ebb42c2",null));e.a=S.exports},2994:function(t,e,n){"use strict";n(2843)},2995:function(t,e,n){"use strict";n(2844)},570:function(t,e,n){"use strict";var r=n(36),a=n(264).trim;r({target:"String",proto:!0,forced:n(2001)("trim")},{trim:function(){return a(this)}})},571:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));n(570),n(47),n(67);var r=function(){var t=12*(window.devicePixelRatio||1),e=document.createElement("canvas");if(!e.getContext||!e.getContext("2d")||"function"!==typeof e.getContext("2d").fillText)return!1;var n=e.getContext("2d");return n.fillStyle="#f00",n.textBaseline="top",n.font="32px Arial",n.fillText("\ud83d\udc28",0,0),0!==n.getImageData(t,t,1,1).data[0]},a=function(t){return t?t.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():""}},61:function(t,e,n){"use strict";n(30),n(47),n(67),n(31),n(230),n(185);var r={name:"Avatar",props:{username:{type:String,default:""},size:{type:Number,default:40}},computed:{style:function(){return{fontSize:"".concat(Math.floor(this.size/2.5),"px")}},userInitial:function(){var t=this.username.split(/[ -]/).reduce((function(t,e){return t+e.charAt(0)}),"");return t.length>2&&-1!==t.search(/[A-Z]/)&&(t=t.replace(/[a-z]+/g,"")),t=t.substring(0,2).toUpperCase()}}},a=(n(2002),n(1)),s=Object(a.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"avatar-container",style:t.style,attrs:{"aria-hidden":"true"}},[t._v("\n  "+t._s(t.userInitial)+"\n")])}),[],!1,null,"fce88f76",null).exports,i=n(571),o={components:{Avatar:s},props:{src:{type:String,default:""},size:{type:String,default:"40px"},badge:{type:String,default:""},username:{type:String,default:""},status:{type:String,default:""},hasBorder:{type:Boolean,default:!1},shouldShowStatusAlways:{type:Boolean,default:!1},title:{type:String,default:""},variant:{type:String,default:"circle"}},data:function(){return{hasImageLoaded:!1,imgError:!1}},computed:{userNameWithoutEmoji:function(){return Object(i.b)(this.username)},showStatusIndicator:function(){return!!this.shouldShowStatusAlways||("online"===this.status||"busy"===this.status)},avatarSize:function(){return Number(this.size.replace(/\D+/g,""))},badgeSrc:function(){return{instagram_direct_message:"instagram-dm",facebook:"messenger","twitter-tweet":"twitter-tweet","twitter-dm":"twitter-dm",whatsapp:"whatsapp",sms:"sms","Channel::Line":"line","Channel::Telegram":"telegram","Channel::WebWidget":""}[this.badge]},badgeStyle:function(){var t=Math.floor(this.avatarSize/3),e="".concat(t+2,"px");return{width:e,height:e,borderRadius:"".concat(t/2,"px")}},statusStyle:function(){var t="".concat(this.avatarSize/4,"px");return{width:t,height:t}},thumbnailClass:function(){var t=this.hasBorder?"border":"",e="circle"===this.variant?"thumbnail-rounded":"thumbnail-square";return"user-thumbnail ".concat(t," ").concat(e)},thumbnailBoxClass:function(){var t="circle"===this.variant?"is-rounded":"";return"user-thumbnail-box ".concat(t)},shouldShowImage:function(){return!!this.src&&(!!this.hasImageLoaded&&!this.imgError)}},watch:{src:function(t,e){t!==e&&this.imgError&&(this.imgError=!1)}},methods:{onImgError:function(){this.imgError=!0},onImgLoad:function(){this.hasImageLoaded=!0}}},u=(n(2003),Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.thumbnailBoxClass,style:{height:t.size,width:t.size},attrs:{title:t.title}},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowImage,expression:"shouldShowImage"}],class:t.thumbnailClass,attrs:{src:t.src},on:{load:t.onImgLoad,error:t.onImgError}}),t._v(" "),n("Avatar",{directives:[{name:"show",rawName:"v-show",value:!t.shouldShowImage,expression:"!shouldShowImage"}],class:t.thumbnailClass,attrs:{username:t.userNameWithoutEmoji,size:t.avatarSize}}),t._v(" "),t.badgeSrc?n("img",{staticClass:"source-badge",style:t.badgeStyle,attrs:{src:"/integrations/channels/badges/"+t.badgeSrc+".png",alt:"Badge"}}):t._e(),t._v(" "),t.showStatusIndicator?n("div",{class:"source-badge user-online-status user-online-status--"+t.status,style:t.statusStyle}):t._e()],1)}),[],!1,null,"4240ad79",null));e.a=u.exports},661:function(t,e,n){},662:function(t,e,n){},680:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(47),n(67);var r=function(t){var e=t.replace("#","");return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>225}}}]);
//# sourceMappingURL=1-9fac15d670269cc1fd3f.chunk.js.map