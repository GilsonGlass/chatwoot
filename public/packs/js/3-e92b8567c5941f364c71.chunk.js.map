{"version":3,"sources":["webpack:///./app/javascript/shared/components/emoji/EmojiInput.vue?e835","webpack:///./app/javascript/shared/components/emoji/EmojiInput.vue?a00b","webpack:///app/javascript/shared/components/emoji/EmojiInput.vue","webpack:///./app/javascript/shared/components/emoji/EmojiInput.vue?1d7d","webpack:///./app/javascript/shared/components/emoji/EmojiInput.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","expression","ref","$t","domProps","on","$event","target","composing","search","_v","_s","selectedKey","_l","item","key","slug","onClick","emoji","category","emojis","length","_e","class","active","changeCategory","getFirstEmojiByCategoryName"],"mappings":"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","file":"js/3-e92b8567c5941f364c71.chunk.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiInput.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emoji-dialog\",attrs:{\"role\":\"dialog\"}},[_c('div',{staticClass:\"emoji-list--wrap\"},[_c('div',{staticClass:\"emoji-search--wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],ref:\"searchbar\",staticClass:\"emoji-search--input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('EMOJI.PLACEHOLDER')},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}})]),_vm._v(\" \"),(_vm.hasNoSearch)?_c('div',{ref:\"emojiItem\",staticClass:\"emoji-item\"},[_c('h5',{staticClass:\"emoji-category--title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.selectedKey)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"emoji--row\"},_vm._l((_vm.filterEmojisByCategory),function(item){return _c('button',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(item.emoji),expression:\"item.emoji\"}],key:item.slug,staticClass:\"emoji--item\",attrs:{\"track-by\":\"$index\"},on:{\"click\":function($event){return _vm.onClick(item.emoji)}}})}),0)]):_c('div',{ref:\"emojiItem\",staticClass:\"emoji-item\"},[_vm._l((_vm.filterAllEmojisBySearch),function(category){return _c('div',{key:category.slug},[(category.emojis.length > 0)?_c('h5',{staticClass:\"emoji-category--title\"},[_vm._v(\"\\n          \"+_vm._s(category.name)+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(category.emojis.length > 0)?_c('div',{staticClass:\"emoji--row\"},_vm._l((category.emojis),function(item){return _c('button',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(item.emoji),expression:\"item.emoji\"}],key:item.slug,staticClass:\"emoji--item\",attrs:{\"track-by\":\"$index\"},on:{\"click\":function($event){return _vm.onClick(item.emoji)}}})}),0):_vm._e()])}),_vm._v(\" \"),(_vm.hasEmptySearchResult)?_c('div',{staticClass:\"empty-message\"},[_c('div',{staticClass:\"emoji-icon\"},[_c('fluent-icon',{attrs:{\"icon\":\"emoji\",\"size\":\"48\"}})],1),_vm._v(\" \"),_c('span',{staticClass:\"empty-message--text\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('EMOJI.NOT_FOUND'))+\"\\n        \")])]):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"emoji-dialog--footer\",attrs:{\"role\":\"menu\"}},[_c('ul',[_c('li',[_c('button',{staticClass:\"emoji--item\",class:{ active: _vm.selectedKey === 'Search' },on:{\"click\":function($event){return _vm.changeCategory('Search')}}},[_c('fluent-icon',{attrs:{\"icon\":\"search\",\"size\":\"16\"}})],1)]),_vm._v(\" \"),_vm._l((_vm.categories),function(category){return _c('li',{key:category.slug,on:{\"click\":function($event){return _vm.changeCategory(category.name)}}},[_c('button',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.getFirstEmojiByCategoryName(category.name)),expression:\"getFirstEmojiByCategoryName(category.name)\"}],staticClass:\"emoji--item\",class:{ active: _vm.selectedKey === category.name },on:{\"click\":function($event){return _vm.changeCategory(category.name)}}})])})],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div role=\"dialog\" class=\"emoji-dialog\">\n    <div class=\"emoji-list--wrap\">\n      <div class=\"emoji-search--wrap\">\n        <input\n          ref=\"searchbar\"\n          v-model=\"search\"\n          type=\"text\"\n          class=\"emoji-search--input\"\n          :placeholder=\"$t('EMOJI.PLACEHOLDER')\"\n        />\n      </div>\n      <div v-if=\"hasNoSearch\" ref=\"emojiItem\" class=\"emoji-item\">\n        <h5 class=\"emoji-category--title\">\n          {{ selectedKey }}\n        </h5>\n        <div class=\"emoji--row\">\n          <button\n            v-for=\"item in filterEmojisByCategory\"\n            :key=\"item.slug\"\n            v-dompurify-html=\"item.emoji\"\n            class=\"emoji--item\"\n            track-by=\"$index\"\n            @click=\"onClick(item.emoji)\"\n          />\n        </div>\n      </div>\n      <div v-else ref=\"emojiItem\" class=\"emoji-item\">\n        <div v-for=\"category in filterAllEmojisBySearch\" :key=\"category.slug\">\n          <h5 v-if=\"category.emojis.length > 0\" class=\"emoji-category--title\">\n            {{ category.name }}\n          </h5>\n          <div v-if=\"category.emojis.length > 0\" class=\"emoji--row\">\n            <button\n              v-for=\"item in category.emojis\"\n              :key=\"item.slug\"\n              v-dompurify-html=\"item.emoji\"\n              class=\"emoji--item\"\n              track-by=\"$index\"\n              @click=\"onClick(item.emoji)\"\n            />\n          </div>\n        </div>\n        <div v-if=\"hasEmptySearchResult\" class=\"empty-message\">\n          <div class=\"emoji-icon\">\n            <fluent-icon icon=\"emoji\" size=\"48\" />\n          </div>\n          <span class=\"empty-message--text\">\n            {{ $t('EMOJI.NOT_FOUND') }}\n          </span>\n        </div>\n      </div>\n\n      <div class=\"emoji-dialog--footer\" role=\"menu\">\n        <ul>\n          <li>\n            <button\n              class=\"emoji--item\"\n              :class=\"{ active: selectedKey === 'Search' }\"\n              @click=\"changeCategory('Search')\"\n            >\n              <fluent-icon icon=\"search\" size=\"16\" />\n            </button>\n          </li>\n          <li\n            v-for=\"category in categories\"\n            :key=\"category.slug\"\n            @click=\"changeCategory(category.name)\"\n          >\n            <button\n              v-dompurify-html=\"getFirstEmojiByCategoryName(category.name)\"\n              class=\"emoji--item\"\n              :class=\"{ active: selectedKey === category.name }\"\n              @click=\"changeCategory(category.name)\"\n            />\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emojis from './emojisGroup.json';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nconst SEARCH_KEY = 'Search';\n\nexport default {\n  components: { FluentIcon },\n  props: {\n    onClick: {\n      type: Function,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      selectedKey: 'Search',\n      emojis,\n      search: '',\n    };\n  },\n  computed: {\n    categories() {\n      return [...this.emojis];\n    },\n    filterEmojisByCategory() {\n      const selectedCategoryName = this.emojis.find(category =>\n        category.name === this.selectedKey ? category.name : null\n      );\n      return selectedCategoryName?.emojis;\n    },\n    filterAllEmojisBySearch() {\n      return this.emojis.map(category => {\n        const allEmojis = category.emojis.filter(emoji =>\n          emoji.slug.replaceAll('_', ' ').includes(this.search.toLowerCase())\n        );\n        return allEmojis.length > 0\n          ? { ...category, emojis: allEmojis }\n          : { ...category, emojis: [] };\n      });\n    },\n    hasNoSearch() {\n      return this.selectedKey !== SEARCH_KEY && this.search === '';\n    },\n    hasEmptySearchResult() {\n      return this.filterAllEmojisBySearch.every(\n        category => category.emojis.length === 0\n      );\n    },\n  },\n  watch: {\n    search() {\n      this.selectedKey = 'Search';\n    },\n    selectedKey() {\n      return this.selectedKey === 'Search' ? this.focusSearchInput() : null;\n    },\n  },\n  mounted() {\n    this.focusSearchInput();\n  },\n  methods: {\n    changeCategory(category) {\n      this.search = '';\n      this.$refs.emojiItem.scrollTo({ top: 0 });\n      this.selectedKey = category;\n    },\n    getFirstEmojiByCategoryName(categoryName) {\n      const categoryItem = this.emojis.find(category =>\n        category.name === categoryName ? category : null\n      );\n      return categoryItem ? categoryItem.emojis[0].emoji : '';\n    },\n    focusSearchInput() {\n      this.$refs.searchbar.focus();\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n/**\n * All the units used below are pixels due to variable name conflict in widget and dashboard\n **/\n@import '~dashboard/assets/scss/variables';\n@import '~dashboard/assets/scss/mixins';\n\n$space-smaller: 4px;\n$space-small: 8px;\n$space-slab: 12px;\n$space-normal: 16px;\n$space-two: 20px;\n$space-medium: 24px;\n$space-large: 28px;\n$space-larger: 32px;\n\n$font-size-tiny: 12px;\n$font-size-small: 14px;\n$font-size-default: 16px;\n$font-size-medium: 18px;\n\n$color-bg: #ebf0f5;\n\n$border-radius-normal: 5px;\n\n.emoji-dialog {\n  @include elegant-card;\n  background: $color-white;\n  border-radius: $space-small;\n  box-sizing: content-box;\n  height: 300px;\n  position: absolute;\n  right: 0;\n  top: -95px;\n  width: 320px;\n  z-index: 1;\n\n  &::before {\n    @include arrow(bottom, $color-bg, $space-slab);\n    bottom: -$space-slab;\n    position: absolute;\n    right: $space-two;\n  }\n}\n\n.emoji-list--wrap {\n  display: flex;\n  flex-direction: column;\n}\n\n.emoji--item {\n  background: transparent;\n  border: 0;\n  border-radius: $space-smaller;\n  cursor: pointer;\n  font-size: $font-size-medium;\n  height: $space-medium;\n  margin: 0;\n  padding: 0 $space-smaller;\n\n  &:hover {\n    background: var(--s-75);\n  }\n}\n\n.emoji--row {\n  box-sizing: border-box;\n  padding: $space-smaller;\n\n  .emoji--item {\n    height: 26px;\n    line-height: 1.5;\n    margin: $space-smaller;\n    width: 26px;\n  }\n}\n\n.emoji-search--wrap {\n  margin: $space-small;\n  position: sticky;\n  top: $space-small;\n\n  .emoji-search--input {\n    background-color: $color-bg;\n    border: 1px solid transparent;\n    border-radius: $border-radius-normal;\n    font-size: $font-size-small;\n    height: $space-larger;\n    margin: 0;\n    padding: $space-small;\n    width: 100%;\n\n    &:focus {\n      box-shadow: 0 0 0 1px $color-woot, 0 0 2px 3px $color-primary-light;\n    }\n  }\n}\n\n.empty-message {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: 212px;\n  justify-content: center;\n\n  .emoji-icon {\n    color: var(--s-200);\n    margin-bottom: $space-small;\n  }\n  .empty-message--text {\n    color: var(--s-200);\n    font-size: $font-size-small;\n    font-weight: 500;\n  }\n}\n\n.emoji-item {\n  height: 212px;\n  overflow-y: auto;\n}\n\n.emoji-category--title {\n  color: $color-heading;\n  font-size: $font-size-small;\n  font-weight: 500;\n  line-height: 1.5;\n  margin: 0;\n  padding: $space-smaller $space-small;\n  text-transform: capitalize;\n}\n\n.emoji-dialog--footer {\n  background-color: $color-bg;\n  bottom: 0;\n  padding: 0 $space-smaller;\n  position: sticky;\n\n  ul {\n    display: flex;\n    list-style: none;\n    margin: 0;\n    overflow: auto;\n    padding: $space-smaller 0;\n\n    > li {\n      align-items: center;\n      cursor: pointer;\n      display: flex;\n      justify-content: center;\n      padding: $space-smaller;\n    }\n\n    li .active {\n      background: $color-white;\n    }\n    .emoji--item {\n      align-items: center;\n      display: flex;\n      font-size: $font-size-small;\n\n      &:hover {\n        background: $color-bg;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmojiInput.vue?vue&type=template&id=ce0bf9e6&\"\nimport script from \"./EmojiInput.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmojiInput.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}